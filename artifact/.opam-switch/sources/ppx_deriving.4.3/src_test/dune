(rule
 (deps test_deriving_show.cppo.ml)
 (targets test_deriving_show.ml)
 (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(test
 (name test_deriving_show)
 (modules test_deriving_show)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.show)))

(test
 (name test_deriving_create)
 (modules test_deriving_create)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.create ppx_deriving.show)))

(test
 (name test_deriving_enum)
 (modules test_deriving_enum)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.enum ppx_deriving.show)))

(rule
 (deps test_deriving_eq.cppo.ml)
 (targets test_deriving_eq.ml)
 (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(test
 (name test_deriving_eq)
 (modules test_deriving_eq)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.eq ppx_deriving.show)))

(rule
 (deps test_deriving_fold.cppo.ml)
 (targets test_deriving_fold.ml)
 (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(test
 (name test_deriving_fold)
 (modules test_deriving_fold)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.fold)))

(rule
 (deps test_deriving_iter.cppo.ml)
 (targets test_deriving_iter.ml)
 (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(test
 (name test_deriving_iter)
 (modules test_deriving_iter)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.iter ppx_deriving.show)))

(test
 (name test_deriving_make)
 (modules test_deriving_make)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.make ppx_deriving.show)))

(rule
 (deps test_deriving_map.cppo.ml)
 (targets test_deriving_map.ml)
 (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(test
 (name test_deriving_map)
 (modules test_deriving_map)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.map ppx_deriving.show)))

(rule
 (deps test_deriving_ord.cppo.ml)
 (targets test_deriving_ord.ml)
 (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(test
 (name test_deriving_ord)
 (modules test_deriving_ord)
 (libraries oUnit)
 (preprocess (pps ppx_deriving.ord)))

(test
 (name test_ppx_deriving)
 (modules test_ppx_deriving)
 (libraries oUnit compiler-libs.common ppx_deriving.api)
 (preprocess (pps ppx_deriving.ord ppx_deriving.show ppx_deriving.eq)))
